{{#*inline "pageTitle"}}Estadísticas · MetaMapa{{/inline}}
{{#> layout}}
<section class="mb-4">
  <h2 class="fw-bold text-primary mb-1">Estadísticas del ecosistema MetaMapa</h2>
  <p class="text-muted mb-0">Consultá los indicadores más recientes y accedé al detalle por tipo de métrica.</p>
</section>
<section class="row g-4">
  <div class="col-lg-6">
    <div class="card border-0 shadow-sm h-100">
      <div class="card-header bg-white">
        <h3 class="h6 mb-0"><i class="fa-solid fa-chart-line me-2 text-success"></i>Última corrida registrada</h3>
      </div>
      <div class="card-body">
        {{#ultimaCorrida}}
        <div class="mb-3">
          <span class="badge text-bg-primary mb-2">{{tipo}}</span>
          <h4 class="h5 fw-semibold">{{clave}}</h4>
          <p class="lead mb-0">{{valor}}</p>
        </div>
        <p class="text-muted small mb-0"><i class="fa-regular fa-clock me-1"></i>Actualizado el {{fechaCalculo}}</p>
        {{/ultimaCorrida}}
        {{^ultimaCorrida}}
        <p class="text-muted mb-0">Todavía no se generaron estadísticas. Configurá el cron para obtener la primera corrida.</p>
        {{/ultimaCorrida}}
      </div>
    </div>
  </div>
  <div class="col-lg-6">
    <div class="card border-0 shadow-sm h-100">
      <div class="card-header bg-white">
        <h3 class="h6 mb-0"><i class="fa-solid fa-list-ul me-2 text-primary"></i>Tipos de estadísticas disponibles</h3>
      </div>
      <div class="table-responsive">
        <table class="table table-striped table-hover align-middle mb-0">
          <thead class="table-light">
            <tr>
              <th scope="col">Tipo</th>
              <th scope="col" class="text-center">Acciones</th>
            </tr>
          </thead>
          <tbody>
          {{#estadisticasPorTipo}}
            <tr>
              <td>{{.}}</td>
              <td class="text-center">
                <a class="btn btn-outline-primary btn-sm" href="/admin/estadisticas/{{.}}">
                  <i class="fa-solid fa-chart-column me-1"></i>Ver detalle
                </a>
              </td>
            </tr>
          {{/estadisticasPorTipo}}
          {{^estadisticasPorTipo}}
            <tr>
              <td colspan="2" class="text-center py-4 text-muted">
                <i class="fa-regular fa-face-frown me-2"></i>No hay tipos configurados.
              </td>
            </tr>
          {{/estadisticasPorTipo}}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>
{{/layout}}
